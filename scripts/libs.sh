#!/usr/bin/env bash

####################################################################################################

hhmmss() {
  date +"%H%M%S"
}

####################################################################################################

yyyymmdd() {
  date +"%Y%m%d"
}

####################################################################################################

quit() {
  exit 1
}

####################################################################################################

prefix() {
  date +"%Y%m%d_%Hh%Mm%Ss"
}

####################################################################################################

timestamp() {
  date +"%F %T.%3N"
}

####################################################################################################

utcTimestamp() {
  date -u +"%F %T.%3N"
}

####################################################################################################

message() {
  local INDICATOR=${1}
  shift
  printf "%s %7s: %s\n" "$(timestamp)" "${INDICATOR}" "$*" | tee -a "${LOG_FILE}"
}

####################################################################################################

info() {
  message INFO "${@}"
}

####################################################################################################

warn() {
  message WARN "${@}"
}

####################################################################################################

error() {
  message ERROR "${@}"
  exit 1
}

####################################################################################################

_curl() {
  local METHOD=${1}
  local URI=${2}
  local ACCESS_TOKEN=${3}
  local DATAFILE=${4}

  local CMD_CURL="curl --silent -X ${METHOD} -H 'Content-Type: application/json' ${URI}"

  [[ -n "${ACCESS_TOKEN}" ]] && [[ "${ACCESS_TOKEN}" != "null" ]] && CMD_CURL="${CMD_CURL} -H 'Authorization: ${ACCESS_TOKEN}'"
  [[ -n "${DATAFILE}" ]] && CMD_CURL="${CMD_CURL} -d @${DATAFILE}"

  eval "${CMD_CURL}"
}

####################################################################################################

post() {
  _curl POST "${@}"
}

####################################################################################################

get() {
  _curl GET "${@}"
}

####################################################################################################

put() {
  _curl PUT "${@}"
}

####################################################################################################

delete() {
  _curl DELETE "${@}"
}

####################################################################################################
